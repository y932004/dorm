<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<title>æ’¿è¥ªå­åæ‡‰åŠ›å°éŠæˆ²</title>
<style>
    body {
        margin: 0;
        background: url("https://github.com/y932004/dorm/blob/main/bg.jpg?raw=true");
        background-size: cover;
        background-position: center;
        font-family: "Noto Sans TC", sans-serif;
        overflow: hidden;
        user-select: none;
    }
    #game {
        width: 100%;
        height: 100vh;
        position: relative;
        overflow: hidden;
    }

    #rope {
        width: 100%;
        height: 5px;
        background: rgba(0,0,0,0.5);
        position: absolute;
        top: 40px;
        left: 0;
    }

    /* æ‰è½çš„è¥ªå­åœ–ç‰‡ï¼ˆåŠ å¤§ç‰ˆï¼‰ */
    .sock {
        width: 90px;
        position: absolute;
        top: 40px;
        cursor: pointer;
        user-select: none;
    }

    #scoreBoard, #timer {
        position: absolute;
        top: 10px;
        font-size: 24px;
        font-weight: bold;
        color: white;
        text-shadow: 0 0 5px black;
    }
    #scoreBoard { right: 20px; }
    #timer { left: 20px; }

    #startBtn {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        padding: 14px 36px;
        background: #6ec8ff;
        color: white;
        border-radius: 12px;
        border: none;
        font-size: 22px;
        cursor: pointer;
    }

    #mock {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 42px;
        font-weight: 900;
        color: red;
        display: none;
        white-space: nowrap;
        text-shadow: 0 0 8px black;
    }
</style>
</head>
<body>
<div id="game">
    <div id="rope"></div>
    <div id="scoreBoard">åˆ†æ•¸ï¼š0</div>
    <div id="timer">10</div>
    <button id="startBtn">é–‹å§‹éŠæˆ²</button>
    <div id="mock"></div>
</div>

<script>
let score = 0;
let timeLeft = 10; // â† æ”¹æˆ 10 ç§’
let gameRunning = false;
let mock = document.getElementById("mock");
let game = document.getElementById("game");

const IMG_SRC = "https://github.com/y932004/dorm/blob/main/S.png?raw=true";

function spawnSock() {
    const sock = document.createElement("img");
    sock.src = IMG_SRC;
    sock.className = "sock";
    sock.style.left = Math.random() * (window.innerWidth - 100) + "px";

    game.appendChild(sock);

    // æ»‘é¼ é»ä¸€ä¸‹å°±åŠ åˆ†
    sock.addEventListener("click", () => {
        if (!gameRunning) return;
        score++;
        document.getElementById("scoreBoard").innerText = "åˆ†æ•¸ï¼š" + score;
        sock.remove();
    });

    fall(sock);
}

function fall(sock) {
    let y = 40;
    let fallSpeed = 3 + Math.random() * 3;

    function loop() {
        if (!gameRunning) { sock.remove(); return; }

        y += fallSpeed;
        sock.style.top = y + "px";

        if (y > window.innerHeight) {
            sock.remove();
            return;
        }
        requestAnimationFrame(loop);
    }
    requestAnimationFrame(loop);
}

function startGame() {
    score = 0;
    timeLeft = 10;     // â† é‡è¨­ç‚º 10 ç§’
    mock.style.display = "none";
    document.getElementById("scoreBoard").innerText = "åˆ†æ•¸ï¼š0";
    document.getElementById("timer").innerText = "10";
    document.getElementById("startBtn").style.display = "none";

    gameRunning = true;

    let sockTimer = setInterval(() => {
        if (!gameRunning) return clearInterval(sockTimer);
        spawnSock();
    }, 650);

    let timer = setInterval(() => {
        timeLeft--;
        document.getElementById("timer").innerText = timeLeft;

        if (timeLeft <= 0) {
            gameRunning = false;
            clearInterval(timer);
            endGame();
        }
    }, 1000);
}

function endGame() {
    let msg = "";

    if (score < 5) {
        msg = "æ‰æ’¿ " + score + " å€‹ï¼Ÿä½ æ˜¯å‰›ç¡é†’ï¼ŸğŸ¥²";
    } else {
        msg = "ä¸éŒ¯å–”ï¼ä½ æœ‰æ’¿è¥ªå­å¤©åˆ†ğŸ˜";
    }

    mock.innerText = msg;
    mock.style.display = "block";
    document.getElementById("startBtn").style.display = "block";
}

document.getElementById("startBtn").addEventListener("click", startGame);
</script>
</body>
</html>
